!function(){"use strict";function t(t,e){function n(){var t,e=[];for(t=0;t<u.length;t++){var n=u[t];e.push({id:n.getId(),x:n.getX(),y:n.getY(),width:n.getWidth(),height:n.getHeight(),src:n.getSrc()})}return e}function i(t){function e(t){return t.id}var n,i,o,r,s=t.map(e),d=u.map(l),w=[];for(n=0;n<u.length;n++)r=u[n],i=r.getId(),-1===s.indexOf(i)&&(u.splice(n,1),r.destroy(),h(i));for(n=0;n<t.length;n++)-1===d.indexOf(t[n].id)&&u.push(new a(t[n].id,t[n].x,t[n].y,t[n].width,t[n].height,t[n].src));for(n=0;n<s.length;n++)for(o=0;o<u.length;o++)if(r=u[o],r.getId()===s[n]){r.deactivate(),w.push(r),u.splice(o,1);break}u=w,c()}function o(t,n,i,o,r,s){if(u.length>99)throw 400;if(-1!==u.map(l).indexOf(t))throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===n||"number"!=typeof n||0>n)throw 400;if(void 0===i||"number"!=typeof i||0>i)throw 400;if(void 0===o||"number"!=typeof o||140>o)throw 400;if(void 0===r||"number"!=typeof r||55>r)throw 400;if(void 0===s||"string"!=typeof s)throw 400;if(n+o>e.getWidth())throw 400;if(i+r>e.getHeight())throw 400;var d;for(d=0;d<u.length;d++)u[d].deactivate();u.push(new a(t,n,i,o,r,s)),c(),v.update(),v.idle()}function r(t){if(void 0===t||"string"!=typeof t)throw 400;var e=u.map(l).indexOf(t);if(-1===e)throw 400;var n=u[e];u.splice(e,1),n.destroy(),c(),v.update(),v.idle(),h(t)}function s(){var t;for(t=u.length-1;t>=0;t--)r(u[t].getId())}function d(t,e){document.addEventListener("thr0w_windows_"+t,e)}function w(t,e){document.removeEventListener("thr0w_windows_"+t,e)}function l(t){return t.getId()}function c(){var t;for(t=0;t<u.length;t++)u[t].setZ(800+t);t=u.length-1,-1!==t&&u[t].activate()}function h(e){document.dispatchEvent(new CustomEvent("thr0w_windows_window_closed",{detail:{wmid:t,id:e}}))}function a(t,n,i,o,s,d){function w(){return{x:n,y:i,scrollX:Q,scrollY:R}}function l(t){n=t.x,i=t.y,Q=t.scrollX,R=t.scrollY,j(n,i,Q,R)}function h(){if(!J){var e,n,i;for(e=0;e<u.length;e++)u[e].deactivate(),u[e].getId()===t&&(n=e,i=u[e]);u.splice(n,1),u.push(i),c(),v.update(),v.idle()}}function a(t){K||(N=!0,C=t.pageX-B,O=t.pageY-G,tt.update())}function _(t){if(N){var r,d;r=t.pageX-B,d=t.pageY-G,n=Math.min(n+r-C,e.getWidth()-o),n=Math.max(n,0),i=Math.min(i+d-O,e.getHeight()-s),i=Math.max(i,0),j(n,i,Q,R),C=r,O=d,tt.update()}}function g(){N&&(N=!1,tt.idle())}function p(t){t.preventDefault(),K||1===t.touches.length&&(C=t.touches[0].pageX-B,O=t.touches[0].pageY-G,tt.update())}function m(t){if(!K){var r,d;r=t.touches[0].pageX-B,d=t.touches[0].pageY-G,n=Math.min(n+r-C,e.getWidth()-o),n=Math.max(n,0),i=Math.min(i+d-O,e.getHeight()-s),i=Math.max(i,0),j(n,i,Q,R),C=r,O=d,tt.update()}}function y(t){K||0===t.touches.length&&tt.idle()}function L(e){e.stopPropagation(),e.preventDefault(),K=!0,r(t)}function E(e){e.stopPropagation(),e.preventDefault(),1===e.touches.length&&(K=!0,r(t))}function b(){F.removeEventListener("load",b),F.contentWindow.document.addEventListener("scroll",H)}function x(){return t}function W(){return n}function k(){return i}function M(){return o}function S(){return s}function I(){return d}function X(t){$.style.zIndex=t}function Y(){J||(J=!0,P.style.visibility="hidden",z.style.visibility="visible")}function T(){J&&(J=!1,z.style.visibility="hidden",P.style.visibility="visible")}function q(){$.removeEventListener("mousedown",h),$.removeEventListener("touchstart",h),D.removeEventListener("mousedown",a),D.removeEventListener("mousemove",_),D.removeEventListener("mouseup",g),D.removeEventListener("mouseleave",g),D.removeEventListener("touchstart",p),D.removeEventListener("touchmove",m),D.removeEventListener("touchend",y),A.removeEventListener("mousedown",L),A.removeEventListener("touchstart",E),F.contentWindow.location.href="about:blank",f.removeChild($),tt.destroy()}function H(){function t(){V?(U=!1,tt.idle()):(V=!0,window.setTimeout(t,100))}U||(window.setTimeout(t,100),U=!0),V=!1,Q=F.contentWindow.document.body.scrollTop,R=F.contentWindow.document.body.scrollLeft,tt.update()}function j(t,e,n,i){function o(){$.style.left=t+"px",$.style.top=e+"px",F.contentWindow.document.body.scrollTop=n,F.contentWindow.document.body.scrollLeft=i}window.requestAnimationFrame(o)}var C,O,D,z,A,F,P,Z=e.getFrame(),B=Z.offsetLeft+f.offsetLeft,G=Z.offsetTop+f.offsetTop,J=!0,K=!1,N=!1,Q=0,R=0,U=!1,V=!0,$=document.createElement("div"),tt=new window.thr0w.Sync(e,"thr0w_windows_"+f.id+"_"+t,w,l);$.id=t,$.style.left=n+"px",$.style.top=i+"px",$.style.width=o+"px",$.style.height=s+"px",$.classList.add("thr0w_windows_window"),$.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#000000" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+d+'" width="'+(o-2)+'" height="'+(s-52)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+(o-2)+"px; height: "+(s-52)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),$.addEventListener("mousedown",h),$.addEventListener("touchstart",h),D=$.querySelector(".thr0w_windows_window__bar"),D.addEventListener("mousedown",a),D.addEventListener("mousemove",_),D.addEventListener("mouseup",g),D.addEventListener("mouseleave",g),D.addEventListener("touchstart",p),D.addEventListener("touchmove",m),D.addEventListener("touchend",y),z=$.querySelector(".thr0w_windows_window__bar__controls"),z.style.visibility="visible",A=z.querySelector(".thr0w_windows_window__bar__controls__control--close"),A.addEventListener("mousedown",L,!0),A.addEventListener("touchstart",E,!0),F=$.querySelector(".thr0w_windows_window__content"),F.addEventListener("load",b),P=$.querySelector(".thr0w_windows_window__cover"),P.style.visibility="hidden",f.appendChild($),this.getId=x,this.getX=W,this.getY=k,this.getWidth=M,this.getHeight=S,this.getSrc=I,this.activate=Y,this.deactivate=T,this.destroy=q,this.setZ=X}if(void 0===t||"string"!=typeof t)throw 400;if(!e||"object"!=typeof e)throw 400;var u=[],f=e.getContent(),v=new window.thr0w.Sync(e,"thr0w_windows_"+f.id,n,i);this.openWindow=o,this.closeWindow=r,this.closeAllWindows=s,this.addEventListener=d,this.removeEventListener=w}if(void 0===window.thr0w)throw 400;var e={};e.WindowManager=t,window.thr0w.windows=e}();