!function(){"use strict";function t(t,e){function n(){var t,e=[];for(t=0;t<f.length;t++){var n=f[t];e.push({id:n.getId(),x:n.getX(),y:n.getY(),width:n.getWidth(),height:n.getHeight(),src:n.getSrc()})}return e}function i(t){function e(t){return t.id}var n,i,o,r,s=t.map(e),d=f.map(c),w=[];for(n=0;n<f.length;n++)r=f[n],i=r.getId(),-1===s.indexOf(i)&&(f.splice(n,1),r.destroy(),a(i));for(n=0;n<t.length;n++)-1===d.indexOf(t[n].id)&&f.push(new u(t[n].id,t[n].x,t[n].y,t[n].width,t[n].height,t[n].src));for(n=0;n<s.length;n++)for(o=0;o<f.length;o++)if(r=f[o],r.getId()===s[n]){r.deactivate(),w.push(r),f.splice(o,1);break}f=w,h()}function o(t,n,i,o,r,s){if(f.length>99)throw 400;if(-1!==f.map(c).indexOf(t))throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===n||"number"!=typeof n||0>n)throw 400;if(void 0===i||"number"!=typeof i||0>i)throw 400;if(void 0===o||"number"!=typeof o||140>o)throw 400;if(void 0===r||"number"!=typeof r||55>r)throw 400;if(void 0===s||"string"!=typeof s)throw 400;if(n+o>e.getWidth())throw 400;if(i+r>e.getHeight())throw 400;var d;for(d=0;d<f.length;d++)f[d].deactivate();f.push(new u(t,n,i,o,r,s)),h(),g.update(),g.idle()}function r(t){if(void 0===t||"string"!=typeof t)throw 400;var e=f.map(c).indexOf(t);if(-1===e)throw 400;var n=f[e];f.splice(e,1),f.push(n),h(),g.update(),g.idle()}function s(t){if(void 0===t||"string"!=typeof t)throw 400;var e=f.map(c).indexOf(t);if(-1===e)throw 400;var n=f[e];f.splice(e,1),n.destroy(),h(),g.update(),g.idle(),a(t)}function d(){var t;for(t=f.length-1;t>=0;t--)s(f[t].getId())}function w(t,e){document.addEventListener("thr0w_windows_"+t,e)}function l(t,e){document.removeEventListener("thr0w_windows_"+t,e)}function c(t){return t.getId()}function h(){var t;for(t=0;t<f.length;t++)f[t].setZ(800+t);t=f.length-1,-1!==t&&f[t].activate()}function a(e){document.dispatchEvent(new CustomEvent("thr0w_windows_window_closed",{detail:{wmid:t,id:e}}))}function u(t,n,i,o,r,d){function w(){return{x:n,y:i,scrollX:Q,scrollY:U}}function l(t){n=t.x,i=t.y,Q=t.scrollX,U=t.scrollY,j(n,i,Q,U)}function c(){if(!J){var e,n,i;for(e=0;e<f.length;e++)f[e].deactivate(),f[e].getId()===t&&(n=e,i=f[e]);f.splice(n,1),f.push(i),h(),g.update(),g.idle()}}function a(t){K||(N=!0,C=(t.pageX-B)*v,D=(t.pageY-G)*v,et.update())}function u(t){if(N){var s,d;s=(t.pageX-B)*v,d=(t.pageY-G)*v,n=Math.min(n+s-C,e.getWidth()-o),n=Math.max(n,0),i=Math.min(i+d-D,e.getHeight()-r),i=Math.max(i,0),j(n,i,Q,U),C=s,D=d,et.update()}}function _(){N&&(N=!1,et.idle())}function m(t){t.preventDefault(),K||1===t.touches.length&&(C=(t.touches[0].pageX-B)*v,D=(t.touches[0].pageY-G)*v,et.update())}function y(t){if(!K){var s,d;s=(t.touches[0].pageX-B)*v,d=(t.touches[0].pageY-G)*v,n=Math.min(n+s-C,e.getWidth()-o),n=Math.max(n,0),i=Math.min(i+d-D,e.getHeight()-r),i=Math.max(i,0),j(n,i,Q,U),C=s,D=d,et.update()}}function L(t){K||0===t.touches.length&&et.idle()}function E(e){e.stopPropagation(),e.preventDefault(),K=!0,s(t)}function b(e){e.stopPropagation(),e.preventDefault(),1===e.touches.length&&(K=!0,s(t))}function x(){P.removeEventListener("load",x),P.contentWindow.document.addEventListener("scroll",O)}function W(){return t}function k(){return n}function M(){return i}function S(){return o}function I(){return r}function X(){return d}function Y(t){tt.style.zIndex=t}function T(){J||(J=!0,Z.style.visibility="hidden",A.style.visibility="visible")}function q(){J&&(J=!1,A.style.visibility="hidden",Z.style.visibility="visible")}function H(){tt.removeEventListener("mousedown",c),tt.removeEventListener("touchstart",c),z.removeEventListener("mousedown",a),z.removeEventListener("mousemove",u),z.removeEventListener("mouseup",_),z.removeEventListener("mouseleave",_),z.removeEventListener("touchstart",m),z.removeEventListener("touchmove",y),z.removeEventListener("touchend",L),F.removeEventListener("mousedown",E),F.removeEventListener("touchstart",b),P.contentWindow.location.href="about:blank",p.removeChild(tt),et.destroy()}function O(){function t(){$?(V=!1,et.idle()):($=!0,window.setTimeout(t,100))}V||(window.setTimeout(t,100),V=!0),$=!1,Q=P.contentWindow.document.body.scrollTop,U=P.contentWindow.document.body.scrollLeft,et.update()}function j(t,e,n,i){function o(){tt.style.left=t+"px",tt.style.top=e+"px",P.contentWindow.document.body.scrollTop=n,P.contentWindow.document.body.scrollLeft=i}window.requestAnimationFrame(o)}var C,D,z,A,F,P,Z,R=e.getFrame(),B=R.offsetLeft+p.offsetLeft,G=R.offsetTop+p.offsetTop,J=!0,K=!1,N=!1,Q=0,U=0,V=!1,$=!0,tt=document.createElement("div"),et=new window.thr0w.Sync(e,"thr0w_windows_"+p.id+"_"+t,w,l);tt.id=t,tt.style.left=n+"px",tt.style.top=i+"px",tt.style.width=o+"px",tt.style.height=r+"px",tt.classList.add("thr0w_windows_window"),tt.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#000000" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+d+'" width="'+(o-2)+'" height="'+(r-52)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+(o-2)+"px; height: "+(r-52)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),tt.addEventListener("mousedown",c),tt.addEventListener("touchstart",c),z=tt.querySelector(".thr0w_windows_window__bar"),z.addEventListener("mousedown",a),z.addEventListener("mousemove",u),z.addEventListener("mouseup",_),z.addEventListener("mouseleave",_),z.addEventListener("touchstart",m),z.addEventListener("touchmove",y),z.addEventListener("touchend",L),A=tt.querySelector(".thr0w_windows_window__bar__controls"),A.style.visibility="visible",F=A.querySelector(".thr0w_windows_window__bar__controls__control--close"),F.addEventListener("mousedown",E,!0),F.addEventListener("touchstart",b,!0),P=tt.querySelector(".thr0w_windows_window__content"),P.addEventListener("load",x),Z=tt.querySelector(".thr0w_windows_window__cover"),Z.style.visibility="hidden",p.appendChild(tt),this.getId=W,this.getX=k,this.getY=M,this.getWidth=S,this.getHeight=I,this.getSrc=X,this.activate=T,this.deactivate=q,this.destroy=H,this.setZ=Y}if(void 0===t||"string"!=typeof t)throw 400;if(!e||"object"!=typeof e)throw 400;var f=[],v=e.getRowScale(),p=e.getContent(),g=new window.thr0w.Sync(e,"thr0w_windows_"+p.id,n,i);this.openWindow=o,this.focusWindow=r,this.closeWindow=s,this.closeAllWindows=d,this.addEventListener=w,this.removeEventListener=l}if(void 0===window.thr0w)throw 400;var e={};e.WindowManager=t,window.thr0w.windows=e}();